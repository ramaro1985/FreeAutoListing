<form id="form-location" action="{{ path('edit_rates_property' , {'type':'rates' , 'id':id}) }}" {{ form_enctype(form) }} method="POST" class="form-horizontal">
    <input type="hidden" name="_csrf_token"   value="{{ csrf_token('registration') }}">

<div id="container" class="container-fluid properties-container">

        <div class="row" style="margin-left: 5px; margin-top: 30px">
         <div class="col-md-12">
<ul class="nav nav-pills nav-profile" style="margin-top: 10px; margin-bottom: 20px">
                        <div id="photos" class="anchor-profile-photo"></div> 
                         <li class="">
                            <div class="btn-group">

                                <a id="link-tab-index-1" href="#description" class="btn btn-default b2b ">
                                    Listing Details <span class="glyphicon glyphicon-info-sign glyphicon-align-right" aria-hidden="true" style="margin-left: 10px;"></span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div  class="btn-group">
                                <a id="link-tab-index-2" href="#location" class="btn btn-default ">
                                    Location <span class="glyphicon glyphicon-map-marker glyphicon-align-right" aria-hidden="true" style="margin-left: 10px;"></span>
                                </a>
                            </div>
                        </li>
                       
                        <li class="">
                            <div class="btn-group">

                                <a id="link-tab-index-4" href="#photos" class="btn btn-default b1b ">
                                    Photos  <span class="glyphicon glyphicon-picture glyphicon-align-right" aria-hidden="true" style="margin-left: 10px;"></span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div class="btn-group">
                                <a id="link-tab-index-6" href="#rates"  class="btn btn-primary b6b active" >
                                    Rates <span class="glyphicon glyphicon-usd glyphicon-align-right" aria-hidden="true" style="margin-left: 10px;"></span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div  class="btn-group">
                                <a id="link-tab-index-5" href="#booking-calendar"  class="btn btn-default b5b">
                                    Calendar <span class="glyphicon glyphicon-calendar glyphicon-align-right" aria-hidden="true" style="margin-left: 10px;"></span>
                                </a>
                            </div>
                        </li>
                         
                        <li class="">
                            <div  class="btn-group">
                                <a id="link-tab-index-3" href="#amenities" class="btn btn-default b3b ">
                                    Amenities <span class="glyphicon glyphicon-list glyphicon-align-right" aria-hidden="true" style="margin-left: 10px;"></span>
                                </a>
                            </div>
                        </li>
                        <li class="">
                            <div class="btn-group">
                                <a id="link-tab-index-7" href="#payments"  class="btn btn-default b7b" >
                                    Policies & Payments <span class="glyphicon glyphicon-credit-card glyphicon-align-right" aria-hidden="true" style="margin-left: 10px;"></span>
                                </a>
                            </div>
                        </li>
                        
                       
                        
                    </ul>
</div>
        </div>
    
    <div class="row">
        <div class="col-md-12  text-center">
            
   
    <div class="col-md-12 col-xs-12">
       <div class="form-group" >
           <div class="col-md-12 col-xs-12 text-left form-title">
       Rental Rates
        </div>
               
      <div class="col-md-11 col-xs-12 text-left">
          <p>Some times of the years are more popular than others. Here you can define different rental rates for peak and slow seasons, event weekends, etc...</p>
        </div>        
       </div>
         
    </div>
    
    
     
    
    <div class="col-md-12 col-xs-12">
 
           {% set property  = form.vars.value %}
          {% if property.periods | length > 0 %}
    <div class="row">
        <div class="col-md-12 col-xs-12 ">
            <div class="list-group">
                <div  class="list-group-item active text-left" style="background-color: #EEEEEE; color:#555555; font-weight: bold">
                    <div class="row">
                        <div class="col-md-3 col-sm-3 col-xs-3" style="font-size: 13px">Period</div>
                    <div class="col-md-2 col-xs-2" style="font-size: 13px">Begins</div>
                    <div class="col-md-2 col-xs-2" style="font-size: 13px">Ends</div>
                    <div class="col-md-1 col-xs-1" style="font-size: 13px">Nightly</div>
                    <div class="col-md-1 col-xs-1" style="font-size: 13px">Weekly</div>
                    <div class="col-md-1 col-xs-1" style="font-size: 13px">Monthly</div>
                    <div class="col-md-2 col-xs-2" style="font-size: 13px">Minimum Stay</div>
                </div>
                    </div>
                
                 {% for period in property.periods %}
                     <div class="list-group-item text-left periodrow{{period.id}}" style="color:#555555; font-size: 14px">
                          <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-3">{{period.seasonName}}</div>
                    <div class="col-md-2 col-xs-2">{%if period.startDate is not null %}{{period.startDate | date("m/d/Y")}}{%endif%}</div>
                    <div class="col-md-2 col-xs-2">{%if period.endDate is not null %}{{period.endDate | date("m/d/Y")}}{%endif%}</div>
                    <div class="col-md-1 col-xs-1">{%if period.nightly is not null %}${{period.nightly}}{%endif%}</div>
                    <div class="col-md-1 col-xs-1">{%if period.weekly is not null %}${{period.weekly}}{%endif%}</div>
                    <div class="col-md-1 col-xs-1">{%if period.monthly is not null %}${{period.monthly}}{%endif%}</div>
                    <div class="col-md-2 col-xs-2">{%if period.minStay is not null %}{{period.minStay}}{%endif%}</div> 
                    <div class="col-md-1 col-xs-1">
                        
                        {%if period.startDate is not null and period.endDate is not null%}
                            <a href="#" class="" onclick="editPeriod('{{period.id}}')"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                        <a href="#" data-toggle="modal" data-target="#myModalPeriodDelete{{period.id}}" style="margin-left: 8px"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>
                         {%else%}
                          <a href="#" class="" onclick="editPeriodStandard('{{period.id}}')"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                        
                        
                         {%endif%}
                        </div>
                     {{ include('AdminBundle:Default:periodDelete-form.html.twig',{ 'id': period.id, 'period': period}) }}
                          </div> 
                    </div>
                {%endfor%}
               </div>
            </div>
            
        </div>


{% endif  %} 
    
           
    </div>
<div class="col-md-12 col-xs-12" style="margin-bottom: 20px">
       
       <div class="form-group" style="margin-bottom: 10px">
       <div class="col-md-12 col-xs-12 text-left">
           <a id="btnadd" type="button" class="btn btn-primary"><span style="margin-right: 10px" class="pathw glyphicon glyphicon-plus"></span> Add Period</a> 
           <img id="loading" src="{{ asset('bundles/common/images/loading.gif') }}" style="margin-left: 5px" class="hide">  
           
       </div>
     
       </div>
           
    </div>
    
            
        <div class="col-md-12 text-center period">   
           
    
           
     </div>
<input type="hidden" id="edit" name="edit" value="0">
<div id="form-buttons" class="col-md-10 col-md-offset-2 text-center hide">
   <div class="form-group" style="margin-bottom: 10px">
    <div class="col-sm-12 col-xs-12 text-left">
        <button id="btnsave" type="submit" class="btn btn-primary">Save</button>
        <button id="btnsavecontinue" type="submit" class="btn btn-primary" style="margin-left: 10px">Save & Continue</button>
    </div>
           
    </div>        
    
  </div>
          

                </div>
            </div>
    
    
    
    
    </div>


   <div style="display: none">{{ form_rest(form) }}</div>
</form>

<script type="text/javascript">
            
              function verifyAction(){
            jQuery('#btnsavecontinue').trigger('click');     
            }
            
            
            jQuery(document).ready(function() {
                
                
            var tab = 5;    
                
            jQuery('#btnsavecontinue').click(function(e){
             if(tab == 1){
           
            jQuery('#form-location').attr('action', "{{path('edit_rates_property', {'type':'description' , 'id':id})}}");
            
            }else if(tab == 2){ 
          
            jQuery('#form-location').attr('action', "{{path('edit_rates_property', {'type':'location' , 'id':id})}}");
       
            }else if(tab == 3){ 
            
            jQuery('#form-location').attr('action', "{{path('edit_rates_property', {'type':'amenities' , 'id':id})}}");
             
            }else if(tab == 4){ 
                  
            jQuery('#form-location').attr('action', "{{path('edit_rates_property', {'type':'gallery' , 'id':id})}}");
                
            }else if(tab == 5){ 
         
            jQuery('#form-location').attr('action', "{{path('edit_rates_property', {'type':'calendar' , 'id':id})}}");
        
            }
            else if(tab == 7){ 
             
            jQuery('#form-location').attr('action', "{{path('edit_rates_property', {'type':'policiesPayments' , 'id':id})}}");
         
            }
            }); 
          
          
          
            jQuery('#link-tab-index-1').click(function(e){
            tab = 1;
             verifyAction();    
            e.preventDefault();
           }); 
           
            jQuery('#link-tab-index-2').click(function(e){
            tab = 2;
             verifyAction();  
            e.preventDefault();
           }); 
           
           jQuery('#link-tab-index-3').click(function(e){
            tab = 3;
             verifyAction();  
            e.preventDefault();
           }); 
             jQuery('#link-tab-index-4').click(function(e){
            tab = 4;
             verifyAction();    
            e.preventDefault();
           }); 
           jQuery('#link-tab-index-5').click(function(e){
            tab = 5;
            verifyAction();  
            e.preventDefault();
           }); 
            jQuery('#link-tab-index-7').click(function(e){
            tab = 7;
            verifyAction();  
            e.preventDefault();
           }); 
           

             jQuery('#btnsave').click(function(e){
            jQuery('#form-location').attr('action', "{{path('edit_rates_property', {'type':'rates' , 'id':id})}}");
            }); 
  
  
    
        
            

          

            jQuery('#btnadd').click(function(){
                   
                             jQuery.ajax({ 
                url: '{{path('period_form')}}',
                type: "POST",
                data: {id: '{{id}}'}, 
                async: false, 
                success: function(response){ 
                  jQuery('#edit').val('0');
                  jQuery('.period').html(response);
                  jQuery('#form-buttons').removeClass('hide');
                } 
                });
                       
                     
                    });
                    
                    
       jQuery( document ).ajaxStart(function() {
        jQuery( "#loading" ).removeClass('hide');
        });
        
            jQuery( document ).ajaxStop(function() {
        jQuery( "#loading" ).addClass('hide');
        });
          
    });      
            
            
                     function editPeriod(aux){
                   
                             jQuery.ajax({ 
                url: '{{path('edit_period_form')}}',
                type: "POST",
                data: {id: aux, pid: '{{id}}'}, 
                async: false, 
                success: function(response){
                  jQuery('#edit').val('1');
                  jQuery('.period').html(response);
                  jQuery('#form-buttons').removeClass('hide');
                } 
                });
                       
                     
                    }
                    
                    
                        function editPeriodStandard(aux){
                   
                             jQuery.ajax({ 
                url: '{{path('edit_period_standard_form')}}',
                type: "POST",
                data: {id: aux, pid: '{{id}}'}, 
                async: false, 
                success: function(response){
                  jQuery('#edit').val('1');
                  jQuery('.period').html(response);
                  jQuery('#form-buttons').removeClass('hide');
                } 
                });
                       
                     
                    }
            
        
           
            
            
            
            </script>
    